#---------------------------------------------------------------
#Aula 01-1: operações aritméticas
#---------------------------------------------------------------
p=2; q=3; r=12

a = 100 * (q // p) + r
print("a={}".format(a))

b = p * (r%5) - q/2
print("b={}".format(b))

#---------------------------------------------------------------
#Aula 01-2: troca 3 valores
#---------------------------------------------------------------
a=10; b=5; c=3

if (a > b): a,b = b,a  #se a > b, troca. (ex: 10,5,3 vira 5,10,3)  

if (b > c): b,c = c,b  #se b > c troca. (ex: 5,10,3 vira 5,3,10 - assim "c" está definido)

if (a > b): a,b = b,a  #se a > b, troca. (ex: 5,3,10 vira 3,5,10 - assim "a" e "b" estão definidos)  

print(a,b,c)

#---------------------------------------------------------------
#Aula 01-3: quantas vezes número real x pode ser dividido por 2
#           enquanto valor resultante for maior que 0,01 
#---------------------------------------------------------------
x = 2.5
k = 0
while (x > 0.01):
    x /= 2
    if (x > 0.01):
        k = k + 1
        print(x)

print('%d vezes' %k)

#---------------------------------------------------------------
#Aula 01-4: cálculo de s = (1/1) + (3/2) + (5/3) + (7/4) + … + (99/50)
#---------------------------------------------------------------

#calcula a série
s=0
denominador = 1
for numerador in range(1,100,2):
    s += numerador/denominador
    #print("+{}/{}={}".format(numerador, denominador, s)) #só para conferir...
    denominador += 1

#imprime com 2 casas decimais
print("s={:.2f}".format(s)) 

#---------------------------------------------------------------
#Aula 02-1: y = f(x) + g(x)
#---------------------------------------------------------------

h = lambda x: x**2 - 16

def f(x):
    if h(x) >= 0: return h(x)
    else: return 1

def g(x):
    if f(x) == 0: return x**2 + 16
    else: return 0

y = lambda x: f(x) + g(x)

x=5
print(y(x))

#obs.: é possível transformar f e g em lambda:
#f = lambda x: h(x) if h(x) >= 0 else 1
#g = lambda x: x**2 + 16 if h(x) == 0 else 0

#---------------------------------------------------------------
#Aula 02-2: função que calcula número harmônico
#---------------------------------------------------------------
def H(n):
    #rejeita se n não for positivo
    if n <= 0: return None
    
    H=1
    for k in range(2,n+1): H += 1/k
    return H

#testando a função
for n in range(1,11):
    print("H({}) = {:.2f}".format(n, H(n)))
    
#---------------------------------------------------------------
#Aula 02-3: mensagem alien
#---------------------------------------------------------------
def mensagem_alien(pessoa, tipo_alien):
    if (tipo_alien == 'B') or (tipo_alien == 'b'):
        msg = pessoa + ', eu vim em missão de paz!'
    elif (tipo_alien == 'M') or (tipo_alien == 'm'):
        msg = pessoa + ', eu vou te abduzir e escravizar!'
    else:
        msg = None
    return msg

print(mensagem_alien('Jennifer Lopez','B'))
print(mensagem_alien('50 Cent','M'))

#---------------------------------------------------------------
#Aula 02-4: função recursiva que calcula número harmônico
#---------------------------------------------------------------
def H(n):
    if n == 0: return 0
    else:
        return 1/n + H(n-1)

#testando a função
for n in range(0,11):
    print("H({}) = {:.2f}".format(n, H(n)))

#---------------------------------------------------------------
#Aula 03-1: lista com 3 números
#---------------------------------------------------------------
l=[10,5,3]

maior = max(l)
menor = min(l)
do_meio = sum(l) - maior - menor

print(menor, do_meio, maior)

#---------------------------------------------------------------
#Aula 03-2: listas v e w
#---------------------------------------------------------------
v = ['#']*6 #cria lista com 6 elementos
w = v[:]    #clona v
print(v, w) #imprime as duas listas
w[5] = '$'  #altera o último elemento de w
print(v, w) #imprime as duas listas

#---------------------------------------------------------------
#Aula 03-3: os dois maiores valores de uma lista
#---------------------------------------------------------------
v = [84,84,86,2,85,85,0,83,23,45,84,86,1,2,85]
print("v=",v)

v.sort(reverse=True)

primeiro = v[0] #acha o maior valor

#acha o menor valor
for i in range(1,len(v)):
    if v[i] != primeiro:
        segundo = v[i]
        break;

#imprime o maior valor e o segundo maior
print("maior={}, segundo maior={}".format(primeiro, segundo))

#---------------------------------------------------------------
#Aula 03-4: cria listas usando fatiamento e métodos de lista
#---------------------------------------------------------------
cores= ['amarelo', 'azul', 'branco', 'preto', 'verde', 'vermelho']
print("cores = ", cores)

l1=cores[:2]
print("l1 = ", l1)

l2=cores[1:4]
print("l2 = ", l2)

l3 = cores[:] #preciso clonar antes para não alterar a lista original
l3.reverse();
print("l3 = ", l3) 

l4 = cores[:] 
l4.remove("branco");
print("l4 = ", l4)

l5=cores[3:]
print("l5 = ", l5)

l6 = cores[:]
l6.insert(4,'rosa')
print("l6 = ", l6)

#---------------------------------------------------------------
#Aula 03-5: multiplica valores de uma lista por -1
#---------------------------------------------------------------
lst = [1,2,3,4,5]
lst2 = [x*-1 for x in lst]
print(lst, '->', lst2)

#---------------------------------------------------------------
#Aula 03-6: número harmônico com list comprehension
#---------------------------------------------------------------
n = 3
H = sum([1/k for k in range(1,n+1)])
print(H)

#---------------------------------------------------------------
#Aula 03-7: soma da diagonal de matriz (representada em lista 2d)
#---------------------------------------------------------------
m=[[1,3,5,7],
   [1,4,6,0],
   [7,6,9,0],
   [1,2,3,4]]

diagonal = [m[i][i] for i in range(len(m))]

print('elementos da diagonal: ', diagonal)
print('soma dos elementos da diagonal: ', sum(diagonal))

#---------------------------------------------------------------
#Aula 04-1: a ED conjunto e suas operações
#---------------------------------------------------------------
exame = {'Bella', 'Edward', 'Renesmee'}  
projeto = {'Jacob', 'Carlisle', 'Alice', 'Bella', 'Esme', 'Edward'}  

#Quais estudantes realizaram o exame e submeteram um projeto?
print(exame & projeto)

#Que estudantes apenas realizaram o exame? 
print(exame - projeto)
 
#Que estudantes apenas submeteram o projeto?
print(projeto - exame)

#Nomes de todos os estudantes
print(projeto | exame)

#todos os estudantes que apenas realizaram o exame ou apenas submeteram o projeto (mas não as duas coisas juntas)
print(projeto ^ exame)

#---------------------------------------------------------------
#Aula 04-2: DOJO -> palavras mais frequentes da letra de uma música
#---------------------------------------------------------------

letra = """O quê?
Que não é, o que não pode ser que
Não é o que não pode ser que não é
O que não pode ser que não
É o que não pode ser que não (diz)
O que não pode ser que
Não é o que não pode ser
Que não é o que (vem!)
O quê?
O quê?
O quê?
O quê?
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Que não é, o que não pode ser que
Não é o que não pode ser que não é
O que não pode ser que não
É o que não pode ser que não (é, é, é)
O que não pode ser que
Não é o que não pode ser
Que não é o que (vem!)
O quê?
O quê?
O quê?
O quê?
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Não não não é
Não é! Não é!
Não não não é
Não é! Não é!
Não não não é
É!
Pode ser!
É!
Pode ser! Pode ser! Pode ser! Pode ser!
É!
É! É!
Pode ser!
É!
Pode ser! Pode ser! Pode ser! Pode ser!
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Que não é o que não pode ser, que não pode ser
Que não pode ser que não é
Que não é o que não pode ser, que não pode ser
Que não pode ser que não é
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Que não é o que não pode ser que não é
Não não não é"""

#PASSO 1: formata a string 
#(remove ENTER e pontuação e converte tudo para minúsculo)
lst_simbolos = [",", "(", ")", "'", "?", "\n"]
for simbolo in lst_simbolos:
    letra = letra.replace(simbolo," ")

letra = letra.lower()

#PASSO 2: converte a string "letra" para uma lista de palavras
lst_letra = letra.split()

#PASSO 3: gera um dicionário onde a chave é a palavra
#         e o valor é o total de ocorrências
dic_freq = {}
for palavra in lst_letra:
    if dic_freq.get(palavra) is None:
        dic_freq[palavra] = 1
    else:
        dic_freq[palavra] += 1

#PASSO 4: converte "dic_freq" para uma lista de tuplas "lst_freq"
#         e ordena resultados de forma descendente pelo total de ocorrências
lst_freq = list()
for chave, valor in dic_freq.items():
    lst_freq.append((valor, chave))

lst_freq.sort(reverse=True)

#PASSO 5: imprime os resultados. A palavra mais frequente será impressa primeiro
#se quiser você pode fatiar (ex: lst_freq[:10] para imprimir as 10 primeiras)
print(lst_freq)

#---------------------------------------------------------------
#Aula 05-1: classe ProgressaoAritmetica
#           salve em um arquivo chamado pa.py 
#---------------------------------------------------------------
class ProgressaoAritmetica:
    
    #construtor
    def __init__(self, a1, r):
        self.a1 = a1
        self.r = r
    
    #retorna o termo an
    def termo(self, n):
        return self.a1 + (n-1) * self.r

    #retorna a sequência  com os n primeiros termos
    def sequencia(self, n):
        return [self.termo(x) for x in range(1, n+1)]

    #retorna a soma dos n primeiros termos
    def soma(self, n):
        return (n * (self.a1 + self.termo(n))) /2 

#---------------------------------------------------------------
#Aula 05-2: programa que usa a classe ProgressaoAritmetica
#           salve no mesmo local do arquivo "pa.py" 
#---------------------------------------------------------------
from pa import ProgressaoAritmetica

pa1 = ProgressaoAritmetica(1,2)
print(pa1.termo(6))
print(pa1.soma(6))
print(pa1.sequencia(6))
print("\n")

pa2 = ProgressaoAritmetica(9,-4)
print(pa2.termo(5))
print(pa2.soma(5))
print(pa2.sequencia(5))
print("\n")

pa3 = ProgressaoAritmetica(0,0.5)
print(pa3.termo(1))
print(pa3.soma(1))
print(pa3.sequencia(9))
print("\n")

pa4 = ProgressaoAritmetica(10,0)
print(pa4.termo(20))
print(pa4.soma(20))
print(pa4.sequencia(20))

#---------------------------------------------------------------
#Aula 05-3: DOJO -> CategoricalNaiveBayes (scikit-learn)
#---------------------------------------------------------------
import pandas as pd
from sklearn.naive_bayes import CategoricalNB

#------------------------------------------
#PARTE 1: definição do BD de treinamento
#         será estruturado um um objeto da classe DataFrame (pandas)
#------------------------------------------
dados = {
      "love"        : [1,1,1,0,1,1,0,0,1,0,1,1,0,1,1],
      "people"      : [1,0,0,0,1,1,0,1,1,1,0,1,0,1,0],
      "relationship": [0,0,1,1,1,0,0,0,1,1,1,0,0,1,1],
      "romance":['S','N','S','S','N','S','N','N','S','N','S','N','N','S','S']
      }

#criando um DataFrame "D" com os dados de treino
D = pd.DataFrame(dados)
print(D)

X=D[['love', 'people','relationship']]
Y=D['romance']

#------------------------------------------
#PARTE 2: treinar um Naive Bayes Categórico
#         usando a classe CategoricalNB do pacote sklearn
#------------------------------------------

#2.1-instanciar um objeto chamado nbc da classe CategoricalNaiveBayes
nbc = CategoricalNB()

#2.2 treinar o modelo com o método fit
nbc.fit(X,Y)

#2.3 obter o(s) novo(s) objeto(s)
dados_novos = {
      "love"        : [0,0,0,0,1,1,1,1],
      "people"      : [0,0,1,1,0,0,1,1],
      "relationship": [0,1,0,1,0,1,0,1],
      }
      
#novos = pd.DataFrame({"love":[1], "people":[0], "relationship": [1]})
novos = pd.DataFrame(dados_novos)

#2.4 classifica o(s) novo(s) objeto(s) com o método predict
classe_novos = nbc.predict(novos)

#2.5 obtem as probabilidades normalizadas
prob_novos = nbc.predict_proba(novos)

print('\n-novo(s) objeto(s):\n',novos)
print('\n-classe(s) predita(s):\n',classe_novos)
print('\n-probabilidades estimadas:\n',prob_novos)

#---------------------------------------------------------------
#Aula 06-1: strings - processamento básico
#---------------------------------------------------------------
p1 = 'Lagarto Teiú'

p1_maiusc = p1.upper()       
p1_minusc = p1.lower()       

num_letras_p1 = len(p1)    
num_letras_a = p1.count('a')    
testa_endswith = p1.endswith('rto',4,7)    
testa_find = p1.find('a')    
testa_rfind = p1.rfind('a')    

p1_troca = p1.replace('a','o')
p1_split = p1.split()

p2 = '  Capivara ';
teste_strip = p2.strip();

p3 = 'ei, olha isso... uma capivara!'
sem_pontuacao = p3.translate(p3.maketrans('','',",.!")) #remove: , . !

print("p1.upper()= " + p1_maiusc)
print("p1.lower()= " + p1_minusc)
print("len(p1)= " + str(num_letras_p1))
print("p1.count('a')= " + str(num_letras_a))
print("p1.endswith('rto',4,7)= ",testa_endswith)
print("p1.find('a')= ",testa_find)
print("p1.rfind('a')= ",testa_rfind)
print("p1.replace('a','o')= " + p1_troca)
print("p1.split()= ", p1_split)
print("p2.strip()= *" + teste_strip + "*")
print("frase com pontuacao= " + p3)
print("frase sem pontuacao= " + sem_pontuacao)

p1 = 'pássaro'
p2 = 'PÁSSARO'
p3 = '123'
print(p1=='pássaro')          #True
print(p1=='PáSSaRo')          #False
print(p1==p2)                 #False
print(p1.lower()==p2.lower()) #True
print(p3 < p1)                #True 

p1 = 'áaa'
p2 = 'aaa'
p3 = 'AAA'
print(p1==p2)                 #False
print(p2 < p1)                #True
print(p2 < p3)                #False

#---------------------------------------------------------------
#Aula 06-2: arquivos (obs.: as bases de dados usadas podem ser encontradas em "bases.zip")
#---------------------------------------------------------------

#1-processa arquivo separado por colunas usando Python básico
arq = open('ARQ_COLUNAS.txt')  #assume que arquivo está na mesma pasta do programa

for linha in arq:
    linha = linha.strip()
    
    v1 = int(linha[:4])
    v2 = linha[4:9]
    print('v1=',v1, ' v2 = ',v2)
    
arq.close()

#2-processa arquivo CSV usando Python básico
arq = open('CEPS.csv')  #assume que arquivo está na mesma pasta do programa

arq.readline() #para pular o cabeçalho

for linha in arq:
    linha = linha.strip()
   
    dados = linha.split(",")
    #print(dados)
    print(dados[0], dados[1], dados[2])

arq.close()
